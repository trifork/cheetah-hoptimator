# A default model with only built-in adapters

version: 1.0
defaultSchema: DATAGEN
schemas:
  - name: DATAGEN
    type: custom
    factory: com.linkedin.hoptimator.catalog.builtin.DatagenSchemaFactory

  - name: RAWKAFKA
    type: custom
    factory: com.linkedin.hoptimator.catalog.kafka.RawKafkaSchemaFactory
    operand:
      clientConfig:
        bootstrap.servers: kafka:19092
        group.id: hoptimator-test
        auto.offset.reset: earliest
        security.protocol: SASL_PLAINTEXT
        sasl.mechanism: OAUTHBEARER
        sasl.login.callback.handler.class: io.strimzi.kafka.oauth.client.JaasClientOauthLoginCallbackHandler
        #sasl.jaas.config is handled by ENV: KAFKA_SASL_JAAS_CONFIG
        #ssl.truststore.password is handled by ENV: KAFKA_SASL_TRUSTSTORE_PASSWORD

  - name: KAFKA
    tables:
      - name: JobNameInputTopic
        type: custom
        factory: com.linkedin.hoptimator.catalog.kafka.OAuth2KafkaTableFactory
        operand:
          bootstrap.servers: kafka:19092
          topic.name: JobNameInputTopic
          consumer.params:
            group.id: hoptimator-table-test-3
            auto.offset.reset: earliest
            key.deserializer: org.apache.kafka.common.serialization.ByteArrayDeserializer
            value.deserializer: org.apache.kafka.common.serialization.ByteArrayDeserializer
            sasl.login.callback.handler.class: io.strimzi.kafka.oauth.client.JaasClientOauthLoginCallbackHandler
            security.protocol: SASL_PLAINTEXT
            sasl.mechanism: OAUTHBEARER
      - name: JobNameInputTopicString
        type: custom
        factory: com.linkedin.hoptimator.catalog.kafka.OAuth2KafkaTableFactory
        operand:
          bootstrap.servers: kafka:19092
          topic.name: JobNameInputTopic
          row.converter: com.linkedin.hoptimator.catalog.kafka.KafkaRowConverterString
          consumer.params:
            group.id: hoptimator-tablestring-test-3
            auto.offset.reset: earliest
            key.deserializer: org.apache.kafka.common.serialization.StringDeserializer
            value.deserializer: org.apache.kafka.common.serialization.StringDeserializer
            sasl.login.callback.handler.class: io.strimzi.kafka.oauth.client.JaasClientOauthLoginCallbackHandler
            security.protocol: SASL_PLAINTEXT
            sasl.mechanism: OAUTHBEARER
